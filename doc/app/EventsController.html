<!DOCTYPE html>

<html>
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">

<title>class EventsController - Rails Application Documentation</title>

<link type="text/css" media="screen" href="./rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "./";
</script>

<script type="text/javascript" charset="utf-8" src="./js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/navigation.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/search_index.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/search.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/searcher.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/darkfish.js"></script>


<body id="top" class="class">
<nav id="metadata">
  <nav id="home-section" class="section">
  <h3 class="section-header">
    <a href="./index.html">Home</a>
    <a href="./table_of_contents.html#classes">Classes</a>
    <a href="./table_of_contents.html#methods">Methods</a>
  </h3>
</nav>


  <nav id="search-section" class="section project-section" class="initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <h3 class="section-header">
      <input type="text" name="search" placeholder="Search" id="search-field"
             title="Type to search, Up and Down to navigate, Enter to load">
    </h3>
  </form>

  <ul id="search-results" class="initially-hidden"></ul>
</nav>


  <div id="file-metadata">
    <nav id="file-list-section" class="section">
  <h3 class="section-header">Defined In</h3>
  <ul>
    <li>app/controllers/events_controller.rb
  </ul>
</nav>

    
  </div>

  <div id="class-metadata">
    
    <nav id="parent-class-section" class="section">
  <h3 class="section-header">Parent</h3>
  
  <p class="link">ApplicationController
  
</nav>

    
    <!-- Method Quickref -->
<nav id="method-list-section" class="section">
  <h3 class="section-header">Methods</h3>

  <ul class="link-list">
    
    <li><a href="#method-i-change_event_theme">#change_event_theme</a>
    
    <li><a href="#method-i-create_event">#create_event</a>
    
    <li><a href="#method-i-custom_url">#custom_url</a>
    
    <li><a href="#method-i-download_excel">#download_excel</a>
    
    <li><a href="#method-i-edit">#edit</a>
    
    <li><a href="#method-i-event_display_attendee">#event_display_attendee</a>
    
    <li><a href="#method-i-event_theme_page">#event_theme_page</a>
    
    <li><a href="#method-i-event_url_link">#event_url_link</a>
    
    <li><a href="#method-i-index">#index</a>
    
    <li><a href="#method-i-save_event">#save_event</a>
    
    <li><a href="#method-i-subcategory_selection">#subcategory_selection</a>
    
    <li><a href="#method-i-theme">#theme</a>
    
    <li><a href="#method-i-uploading">#uploading</a>
    
    <li><a href="#method-i-view">#view</a>
    
  </ul>
</nav>

  </div>

  <div id="project-metadata">
    <nav id="fileindex-section" class="section project-section">
  <h3 class="section-header">Pages</h3>

  <ul>
  
    <li class="file"><a href="./doc/README_FOR_APP.html">README_FOR_APP</a>
  
  </ul>
</nav>

    <nav id="classindex-section" class="section project-section">
  <h3 class="section-header">Class and Module Index</h3>

  <ul class="link-list">
  
    <li><a href="./ActiveAdmin.html">ActiveAdmin</a>
  
    <li><a href="./ActiveAdmin/Views.html">ActiveAdmin::Views</a>
  
    <li><a href="./ActiveAdmin/Views/Pages.html">ActiveAdmin::Views::Pages</a>
  
    <li><a href="./ActiveAdmin/Views/Pages/Base.html">ActiveAdmin::Views::Pages::Base</a>
  
    <li><a href="./AffiliatesController.html">AffiliatesController</a>
  
    <li><a href="./ApplicationHelper.html">ApplicationHelper</a>
  
    <li><a href="./AuthController.html">AuthController</a>
  
    <li><a href="./CancelOrdersController.html">CancelOrdersController</a>
  
    <li><a href="./ContactListHelper.html">ContactListHelper</a>
  
    <li><a href="./ContactListsController.html">ContactListsController</a>
  
    <li><a href="./ContactListsHelper.html">ContactListsHelper</a>
  
    <li><a href="./ContactsController.html">ContactsController</a>
  
    <li><a href="./ContactsHelper.html">ContactsHelper</a>
  
    <li><a href="./CustomAdminHeader.html">CustomAdminHeader</a>
  
    <li><a href="./ErrorsController.html">ErrorsController</a>
  
    <li><a href="./EventsController.html">EventsController</a>
  
    <li><a href="./ExceptionsController.html">ExceptionsController</a>
  
    <li><a href="./HomeController.html">HomeController</a>
  
    <li><a href="./HomeHelper.html">HomeHelper</a>
  
    <li><a href="./InvitesController.html">InvitesController</a>
  
    <li><a href="./ManageAccountController.html">ManageAccountController</a>
  
    <li><a href="./ManageAccountHelper.html">ManageAccountHelper</a>
  
    <li><a href="./ManageEventController.html">ManageEventController</a>
  
    <li><a href="./ManageEventHelper.html">ManageEventHelper</a>
  
    <li><a href="./MobileLoginsController.html">MobileLoginsController</a>
  
    <li><a href="./MyTicketsController.html">MyTicketsController</a>
  
    <li><a href="./Object.html">Object</a>
  
    <li><a href="./OrdersController.html">OrdersController</a>
  
    <li><a href="./OrganizersController.html">OrganizersController</a>
  
    <li><a href="./PagesController.html">PagesController</a>
  
    <li><a href="./ProductsHelper.html">ProductsHelper</a>
  
    <li><a href="./PurchasesController.html">PurchasesController</a>
  
    <li><a href="./ReferrersController.html">ReferrersController</a>
  
    <li><a href="./SearchController.html">SearchController</a>
  
    <li><a href="./TicketsController.html">TicketsController</a>
  
    <li><a href="./TipsController.html">TipsController</a>
  
    <li><a href="./UserMailer.html">UserMailer</a>
  
    <li><a href="./UsersController.html">UsersController</a>
  
    <li><a href="./UsersHelper.html">UsersHelper</a>
  
    <li><a href="./WalletController.html">WalletController</a>
  
  </ul>
</nav>

  </div>
</nav>

<div id="documentation">
  <h1 class="class">class EventsController</h1>

  <div id="description" class="description">
    
  </div><!-- description -->

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    

    <!-- Methods -->
    
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Public Instance Methods</h3>

    
      <div id="method-i-change_event_theme" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">change_event_theme</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="change_event_theme-source">
            <pre><span class="ruby-comment"># File app/controllers/events_controller.rb, line 604</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">change_event_theme</span>
   <span class="ruby-ivar">@one_theme</span> = <span class="ruby-constant">Theme</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-value">:theme_id</span>])
  
   <span class="ruby-identifier">respond_to</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">format</span><span class="ruby-operator">|</span>
       <span class="ruby-identifier">format</span>.<span class="ruby-identifier">html</span>  { <span class="ruby-identifier">render</span> <span class="ruby-value">:template</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'events/_change_event_theme'</span>, <span class="ruby-value">:layout</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">false</span> }
   <span class="ruby-keyword">end</span> 
   
<span class="ruby-keyword">end</span></pre>
          </div><!-- change_event_theme-source -->
          
        </div>

        

        
      </div><!-- change_event_theme-method -->

    
      <div id="method-i-create_event" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">create_event</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p><a href="EventsController.html#method-i-create_event">#create_event</a>
starts #####</p>
          

          
          <div class="method-source-code" id="create_event-source">
            <pre><span class="ruby-comment"># File app/controllers/events_controller.rb, line 37</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">create_event</span> 
   <span class="ruby-ivar">@meta_title</span> = <span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span> <span class="ruby-string">'meta_title.set_event_title'</span> 
   <span class="ruby-ivar">@event</span> = <span class="ruby-constant">Event</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">params</span>[<span class="ruby-value">:event</span>])
   
   
    
   <span class="ruby-keyword">if</span> <span class="ruby-identifier">request</span>.<span class="ruby-identifier">post?</span>   <span class="ruby-comment">########### after post starts #####</span>
             
               
                
                 <span class="ruby-keyword">if</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:event_prev_id</span>]<span class="ruby-operator">==</span><span class="ruby-string">''</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:event_prev_id</span>]<span class="ruby-operator">==</span><span class="ruby-keyword">nil</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:event_prev_id</span>]<span class="ruby-operator">==</span><span class="ruby-value">0</span>
                    <span class="ruby-ivar">@event</span> = <span class="ruby-constant">Event</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">params</span>[<span class="ruby-value">:event</span>])
                 <span class="ruby-keyword">else</span>
                     <span class="ruby-ivar">@event</span> = <span class="ruby-constant">Event</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-value">:event_prev_id</span>])
                 <span class="ruby-keyword">end</span>
                 
                
            <span class="ruby-identifier">respond_to</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">format</span><span class="ruby-operator">|</span>
                
                <span class="ruby-identifier">params</span>[<span class="ruby-value">:event</span>][<span class="ruby-value">:user_id</span>] = <span class="ruby-identifier">session</span>[<span class="ruby-value">:user_id</span>]
                <span class="ruby-ivar">@event</span>[<span class="ruby-value">:user_id</span>] =  <span class="ruby-identifier">session</span>[<span class="ruby-value">:user_id</span>]
                
                <span class="ruby-keyword">if</span>(<span class="ruby-ivar">@event</span>[<span class="ruby-value">:online_event_option</span>]<span class="ruby-operator">==</span><span class="ruby-value">1</span>) <span class="ruby-keyword">then</span>
                     <span class="ruby-ivar">@event</span>[<span class="ruby-value">:street_address</span>] = <span class="ruby-identifier">params</span>[<span class="ruby-value">:street_address2</span>]
                     <span class="ruby-identifier">params</span>[<span class="ruby-value">:event</span>][<span class="ruby-value">:street_address</span>] = <span class="ruby-identifier">params</span>[<span class="ruby-value">:street_address2</span>]
                <span class="ruby-keyword">else</span>
                     <span class="ruby-ivar">@event</span>[<span class="ruby-value">:street_address</span>] = <span class="ruby-identifier">params</span>[<span class="ruby-value">:street_address1</span>]  
                      <span class="ruby-identifier">params</span>[<span class="ruby-value">:event</span>][<span class="ruby-value">:street_address</span>] = <span class="ruby-identifier">params</span>[<span class="ruby-value">:street_address1</span>] 
                <span class="ruby-keyword">end</span> 
               
               <span class="ruby-identifier">saved</span> = <span class="ruby-value">1</span>
                 <span class="ruby-keyword">if</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:event_prev_id</span>]<span class="ruby-operator">==</span><span class="ruby-string">''</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:event_prev_id</span>]<span class="ruby-operator">==</span><span class="ruby-keyword">nil</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:event_prev_id</span>]<span class="ruby-operator">==</span><span class="ruby-value">0</span>
                      <span class="ruby-keyword">if</span>(<span class="ruby-ivar">@event</span>[<span class="ruby-value">:event_repeat</span>] <span class="ruby-operator">==</span> <span class="ruby-string">''</span> <span class="ruby-operator">||</span> <span class="ruby-ivar">@event</span>[<span class="ruby-value">:event_repeat</span>]<span class="ruby-operator">==</span><span class="ruby-keyword">nil</span>)
                         <span class="ruby-ivar">@event</span>[<span class="ruby-value">:event_repeat</span>] = <span class="ruby-value">0</span>
                      <span class="ruby-keyword">end</span>
                     
                      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@event</span>.<span class="ruby-identifier">save</span>
                        <span class="ruby-identifier">event_id</span> = <span class="ruby-ivar">@event</span>[<span class="ruby-value">:id</span>] <span class="ruby-comment">#Event.maximum('id')</span>
                        <span class="ruby-constant">UserMailer</span>.<span class="ruby-identifier">create_event_email</span>(<span class="ruby-ivar">@event</span>).<span class="ruby-identifier">deliver</span>
                     <span class="ruby-keyword">else</span>
                        <span class="ruby-identifier">saved</span> = <span class="ruby-value">0</span>
                     <span class="ruby-keyword">end</span>     
                 <span class="ruby-keyword">else</span>
                     <span class="ruby-keyword">if</span> <span class="ruby-ivar">@event</span>.<span class="ruby-identifier">update_attributes</span>(<span class="ruby-identifier">params</span>[<span class="ruby-value">:event</span>])
                        <span class="ruby-identifier">event_id</span> = <span class="ruby-identifier">params</span>[<span class="ruby-value">:event_prev_id</span>]
                     <span class="ruby-keyword">else</span>
                        <span class="ruby-identifier">saved</span> = <span class="ruby-value">0</span>
                     <span class="ruby-keyword">end</span>     
                 <span class="ruby-keyword">end</span>
                 
                <span class="ruby-keyword">if</span> <span class="ruby-identifier">saved</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span>
                  
                 <span class="ruby-comment"># </span>
                
                  <span class="ruby-comment">########### organizer section start  ###############</span>
                  
                   <span class="ruby-keyword">if</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:event</span>][<span class="ruby-value">:organizer_host</span>]<span class="ruby-operator">==</span><span class="ruby-string">''</span>
                     <span class="ruby-identifier">params</span>[<span class="ruby-value">:event</span>][<span class="ruby-value">:organizer_host</span>] = <span class="ruby-string">'Unnamed Organizer'</span>
                   <span class="ruby-keyword">end</span>   
                  
                  
                       
                  <span class="ruby-keyword">if</span>(<span class="ruby-identifier">params</span>[<span class="ruby-value">:event</span>][<span class="ruby-value">:organizer_id</span>]<span class="ruby-operator">==</span><span class="ruby-value">0</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:event</span>][<span class="ruby-value">:organizer_id</span>]<span class="ruby-operator">==</span><span class="ruby-string">'0'</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:event</span>][<span class="ruby-value">:organizer_id</span>]<span class="ruby-operator">==</span><span class="ruby-keyword">nil</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:event</span>][<span class="ruby-value">:organizer_id</span>]<span class="ruby-operator">==</span><span class="ruby-string">''</span>)
                        <span class="ruby-ivar">@org</span> = <span class="ruby-constant">Organizer</span>.<span class="ruby-identifier">new</span>
                       
                        <span class="ruby-ivar">@org</span>[<span class="ruby-value">:name</span>] = <span class="ruby-identifier">params</span>[<span class="ruby-value">:event</span>][<span class="ruby-value">:organizer_host</span>]
                        <span class="ruby-ivar">@org</span>[<span class="ruby-value">:description</span>] = <span class="ruby-identifier">params</span>[<span class="ruby-value">:event</span>][<span class="ruby-value">:host_description</span>]
                        <span class="ruby-ivar">@org</span>[<span class="ruby-value">:user_id</span>] = <span class="ruby-identifier">session</span>[<span class="ruby-value">:user_id</span>]   
                        <span class="ruby-ivar">@org</span>[<span class="ruby-value">:event_cnt</span>] = <span class="ruby-value">1</span>
                        <span class="ruby-ivar">@org</span>.<span class="ruby-identifier">save</span>
                        <span class="ruby-ivar">@event</span>[<span class="ruby-value">:organizer_id</span>] = <span class="ruby-ivar">@org</span>[<span class="ruby-value">:id</span>]
                        
                        <span class="ruby-ivar">@event</span>.<span class="ruby-identifier">save</span>
                        
                  <span class="ruby-keyword">else</span>
                        <span class="ruby-ivar">@organizer</span> = <span class="ruby-constant">Organizer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-value">:event</span>][<span class="ruby-value">:organizer_id</span>])
                        <span class="ruby-identifier">org_id</span>=<span class="ruby-ivar">@organizer</span>[<span class="ruby-value">:id</span>]
                       
                        <span class="ruby-constant">Organizer</span>.<span class="ruby-identifier">update</span>(<span class="ruby-identifier">params</span>[<span class="ruby-value">:event</span>][<span class="ruby-value">:organizer_id</span>], <span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:org</span>][<span class="ruby-value">:organizer_host</span>][<span class="ruby-identifier">org_id</span>.<span class="ruby-identifier">to_s</span>], <span class="ruby-value">:description</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:org</span>][<span class="ruby-value">:host_description</span>][<span class="ruby-identifier">org_id</span>.<span class="ruby-identifier">to_s</span>], <span class="ruby-value">:event_cnt</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@organizer</span>[<span class="ruby-value">:event_cnt</span>]<span class="ruby-operator">+</span><span class="ruby-value">1</span>)
                        
                        <span class="ruby-ivar">@event</span>[<span class="ruby-value">:organizer_host</span>] =<span class="ruby-identifier">params</span>[<span class="ruby-value">:org</span>][<span class="ruby-value">:organizer_host</span>][<span class="ruby-identifier">org_id</span>.<span class="ruby-identifier">to_s</span>]
                        <span class="ruby-ivar">@event</span>[<span class="ruby-value">:host_description</span>] =<span class="ruby-identifier">params</span>[<span class="ruby-value">:org</span>][<span class="ruby-value">:host_description</span>][<span class="ruby-identifier">org_id</span>.<span class="ruby-identifier">to_s</span>]
                        
                        <span class="ruby-ivar">@event</span>.<span class="ruby-identifier">save</span>
                  <span class="ruby-keyword">end</span>     <span class="ruby-comment">########   organization ends ##########</span>
                  
                
                 <span class="ruby-comment">########### event repeat section start  ###############   </span>
                 <span class="ruby-keyword">if</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:event_repeat</span>]
                       <span class="ruby-ivar">@eve_repeat</span> = <span class="ruby-constant">EventRepeat</span>.<span class="ruby-identifier">new</span>
                       <span class="ruby-ivar">@eve_repeat</span>.<span class="ruby-identifier">attributes</span> = <span class="ruby-identifier">params</span>[<span class="ruby-value">:event_repeat</span>]
                       <span class="ruby-ivar">@eve_repeat</span>[<span class="ruby-value">:event_id</span>] = <span class="ruby-identifier">event_id</span>
                      <span class="ruby-identifier">params</span>[<span class="ruby-value">:event_repeat</span>][<span class="ruby-value">:event_id</span>]  = <span class="ruby-identifier">event_id</span>
                       
                        <span class="ruby-keyword">if</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:event_repeat_prev_id</span>]<span class="ruby-operator">!=</span><span class="ruby-string">''</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:event_repeat_prev_id</span>]<span class="ruby-operator">!=</span><span class="ruby-keyword">nil</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:event_repeat_prev_id</span>]<span class="ruby-operator">!=</span><span class="ruby-string">'0'</span>
                            <span class="ruby-ivar">@everep</span> = <span class="ruby-constant">EventRepeat</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-value">:event_repeat_prev_id</span>])
                            <span class="ruby-ivar">@everep</span> = <span class="ruby-ivar">@everep</span>.<span class="ruby-identifier">update_attributes</span>(<span class="ruby-identifier">params</span>[<span class="ruby-value">:event_repeat</span>])
                        <span class="ruby-keyword">else</span>
                            <span class="ruby-ivar">@everep</span> = <span class="ruby-ivar">@eve_repeat</span>.<span class="ruby-identifier">save</span>
                        <span class="ruby-keyword">end</span>   
                        
                 <span class="ruby-keyword">end</span>      <span class="ruby-comment">########   event repeat ends ########## </span>
                 
                                   
                 <span class="ruby-comment">########### tickets section start  ###############</span>
                <span class="ruby-keyword">if</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:ticket</span>]   
                 
                 <span class="ruby-keyword">if</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:ticket</span>][<span class="ruby-value">:free_ticket_id</span>] <span class="ruby-operator">||</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:ticket</span>][<span class="ruby-value">:paid_ticket_id</span>] <span class="ruby-operator">||</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:ticket</span>][<span class="ruby-value">:donation_ticket_id</span>]
                      <span class="ruby-ivar">@all_tickets</span> = <span class="ruby-constant">Ticket</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">:all</span>, <span class="ruby-value">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-string">'event_id=?'</span>, <span class="ruby-ivar">@event</span>[<span class="ruby-value">:id</span>]])
                      
                      
                    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@all_tickets</span>.<span class="ruby-identifier">count</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
                        
                      <span class="ruby-keyword">for</span> <span class="ruby-identifier">all</span> <span class="ruby-keyword">in</span> <span class="ruby-ivar">@all_tickets</span>
                          <span class="ruby-identifier">chk_id</span> = <span class="ruby-value">0</span>
                          <span class="ruby-keyword">if</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:ticket</span>][<span class="ruby-value">:free_ticket_id</span>]
                            <span class="ruby-keyword">if</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:ticket</span>][<span class="ruby-value">:free_ticket_id</span>].<span class="ruby-identifier">count</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
                                <span class="ruby-keyword">if</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:ticket</span>][<span class="ruby-value">:free_ticket_id</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">all</span>[<span class="ruby-value">:id</span>].<span class="ruby-identifier">to_s</span>)
                                    <span class="ruby-identifier">chk_id</span> = <span class="ruby-value">1</span>
                                <span class="ruby-keyword">end</span>
                            <span class="ruby-keyword">end</span> 
                          <span class="ruby-keyword">end</span>
                            
                          <span class="ruby-keyword">if</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:ticket</span>][<span class="ruby-value">:paid_ticket_id</span>]
                            <span class="ruby-keyword">if</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:ticket</span>][<span class="ruby-value">:paid_ticket_id</span>].<span class="ruby-identifier">count</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
                                <span class="ruby-keyword">if</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:ticket</span>][<span class="ruby-value">:paid_ticket_id</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">all</span>[<span class="ruby-value">:id</span>].<span class="ruby-identifier">to_s</span>)
                                    <span class="ruby-identifier">chk_id</span> = <span class="ruby-value">1</span>
                                <span class="ruby-keyword">end</span>
                            <span class="ruby-keyword">end</span> 
                         <span class="ruby-keyword">end</span>
                          
                        <span class="ruby-keyword">if</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:ticket</span>][<span class="ruby-value">:donation_ticket_id</span>]  
                          <span class="ruby-keyword">if</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:ticket</span>][<span class="ruby-value">:donation_ticket_id</span>].<span class="ruby-identifier">count</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
                              <span class="ruby-keyword">if</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:ticket</span>][<span class="ruby-value">:donation_ticket_id</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">all</span>[<span class="ruby-value">:id</span>].<span class="ruby-identifier">to_s</span>)
                                  <span class="ruby-identifier">chk_id</span> = <span class="ruby-value">1</span>
                              <span class="ruby-keyword">end</span>
                          <span class="ruby-keyword">end</span>
                       <span class="ruby-keyword">end</span>     
                          
                          <span class="ruby-keyword">if</span> <span class="ruby-identifier">chk_id</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
                              <span class="ruby-identifier">all</span>.<span class="ruby-identifier">destroy</span>
                          <span class="ruby-keyword">end</span>
                       <span class="ruby-keyword">end</span>
                      
                    <span class="ruby-keyword">end</span>
                 <span class="ruby-keyword">end</span>
                 <span class="ruby-comment">#### free tickets save</span>
                    
                    <span class="ruby-ivar">@free</span> = <span class="ruby-identifier">params</span>[<span class="ruby-value">:ticket</span>][<span class="ruby-value">:free_ticket_name</span>]
                    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@free</span>  
                      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@free</span>.<span class="ruby-identifier">count</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
                        <span class="ruby-identifier">k</span>=<span class="ruby-value">0</span>
                        <span class="ruby-ivar">@free</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">free</span><span class="ruby-operator">|</span>
                           
                           
                           
                            <span class="ruby-ivar">@ticket</span> = <span class="ruby-constant">Ticket</span>.<span class="ruby-identifier">new</span>
                            <span class="ruby-ivar">@ticket</span>[<span class="ruby-value">:event_id</span>] = <span class="ruby-identifier">event_id</span>
                            <span class="ruby-ivar">@ticket</span>[<span class="ruby-value">:free</span>] = <span class="ruby-value">1</span>
                            <span class="ruby-ivar">@ticket</span>[<span class="ruby-value">:free_ticket_name</span>] = <span class="ruby-identifier">params</span>[<span class="ruby-value">:ticket</span>][<span class="ruby-value">:free_ticket_name</span>][<span class="ruby-identifier">k</span>]
                            <span class="ruby-ivar">@ticket</span>[<span class="ruby-value">:free_qty</span>] = <span class="ruby-identifier">params</span>[<span class="ruby-value">:ticket</span>][<span class="ruby-value">:free_qty</span>][<span class="ruby-identifier">k</span>]
                            <span class="ruby-ivar">@ticket</span>[<span class="ruby-value">:free_description</span>] = <span class="ruby-identifier">params</span>[<span class="ruby-value">:ticket</span>][<span class="ruby-value">:free_description</span>][<span class="ruby-identifier">k</span>]
                            <span class="ruby-ivar">@ticket</span>[<span class="ruby-value">:free_min_purchase</span>] = <span class="ruby-identifier">params</span>[<span class="ruby-value">:ticket</span>][<span class="ruby-value">:free_min_purchase</span>][<span class="ruby-identifier">k</span>]
                            <span class="ruby-ivar">@ticket</span>[<span class="ruby-value">:free_max_purchase</span>] = <span class="ruby-identifier">params</span>[<span class="ruby-value">:ticket</span>][<span class="ruby-value">:free_max_purchase</span>][<span class="ruby-identifier">k</span>]
                            <span class="ruby-ivar">@ticket</span>[<span class="ruby-value">:free_start_sale</span>] = <span class="ruby-identifier">params</span>[<span class="ruby-value">:ticket</span>][<span class="ruby-value">:free_start_sale</span>][<span class="ruby-identifier">k</span>]
                            <span class="ruby-ivar">@ticket</span>[<span class="ruby-value">:free_end_sale</span>] = <span class="ruby-identifier">params</span>[<span class="ruby-value">:ticket</span>][<span class="ruby-value">:free_end_sale</span>][<span class="ruby-identifier">k</span>]
                            <span class="ruby-ivar">@ticket</span>[<span class="ruby-value">:free_hide_description</span>] = <span class="ruby-identifier">params</span>[<span class="ruby-value">:ticket</span>][<span class="ruby-value">:free_hide_description</span>][<span class="ruby-identifier">k</span>]  
                            <span class="ruby-ivar">@ticket</span>[<span class="ruby-value">:free_ticket_status</span>] = <span class="ruby-identifier">params</span>[<span class="ruby-value">:ticket</span>][<span class="ruby-value">:free_ticket_status</span>][<span class="ruby-identifier">k</span>]  
                            
                            <span class="ruby-ivar">@ticket</span>[<span class="ruby-value">:paid</span>] = <span class="ruby-value">0</span>
                            <span class="ruby-ivar">@ticket</span>[<span class="ruby-value">:donation</span>] = <span class="ruby-value">0</span>
                        
                            
                           
                            <span class="ruby-keyword">if</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:ticket</span>][<span class="ruby-value">:free_ticket_id</span>][<span class="ruby-identifier">k</span>]<span class="ruby-operator">==</span><span class="ruby-value">0</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:ticket</span>][<span class="ruby-value">:free_ticket_id</span>][<span class="ruby-identifier">k</span>]<span class="ruby-operator">==</span><span class="ruby-string">'0'</span>
                                  <span class="ruby-ivar">@ticket</span>.<span class="ruby-identifier">save</span>
                            <span class="ruby-keyword">else</span>  
                                  <span class="ruby-ivar">@tic</span> = <span class="ruby-constant">Ticket</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-value">:ticket</span>][<span class="ruby-value">:free_ticket_id</span>][<span class="ruby-identifier">k</span>])
                                  <span class="ruby-constant">Ticket</span>.<span class="ruby-identifier">update</span>(<span class="ruby-identifier">params</span>[<span class="ruby-value">:ticket</span>][<span class="ruby-value">:free_ticket_id</span>][<span class="ruby-identifier">k</span>], 
                                      <span class="ruby-value">:free_ticket_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:ticket</span>][<span class="ruby-value">:free_ticket_name</span>][<span class="ruby-identifier">k</span>], 
                                      <span class="ruby-value">:free_qty</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:ticket</span>][<span class="ruby-value">:free_qty</span>][<span class="ruby-identifier">k</span>], 
                                      <span class="ruby-value">:free_description</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:ticket</span>][<span class="ruby-value">:free_description</span>][<span class="ruby-identifier">k</span>], 
                                      <span class="ruby-value">:free_min_purchase</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:ticket</span>][<span class="ruby-value">:free_min_purchase</span>][<span class="ruby-identifier">k</span>], 
                                      <span class="ruby-value">:free_max_purchase</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:ticket</span>][<span class="ruby-value">:free_max_purchase</span>][<span class="ruby-identifier">k</span>], 
                                      <span class="ruby-value">:free_start_sale</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:ticket</span>][<span class="ruby-value">:free_start_sale</span>][<span class="ruby-identifier">k</span>], 
                                      <span class="ruby-value">:free_end_sale</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:ticket</span>][<span class="ruby-value">:free_end_sale</span>][<span class="ruby-identifier">k</span>], 
                                      <span class="ruby-value">:free_hide_description</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:ticket</span>][<span class="ruby-value">:free_hide_description</span>][<span class="ruby-identifier">k</span>], 
                                      <span class="ruby-value">:free_ticket_status</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:ticket</span>][<span class="ruby-value">:free_ticket_status</span>][<span class="ruby-identifier">k</span>])
                            <span class="ruby-keyword">end</span>
                            
                             
                            
                            <span class="ruby-identifier">k</span><span class="ruby-operator">+=</span><span class="ruby-value">1</span>
                        <span class="ruby-keyword">end</span>
                        
                      <span class="ruby-keyword">end</span>
                    <span class="ruby-keyword">end</span>
                  <span class="ruby-comment">#### paid tickets save</span>
                    
                      <span class="ruby-ivar">@paid</span> = <span class="ruby-identifier">params</span>[<span class="ruby-value">:ticket</span>][<span class="ruby-value">:paid_ticket_name</span>]
                    
                    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@paid</span>
                      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@paid</span>.<span class="ruby-identifier">count</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
                        <span class="ruby-identifier">k</span>=<span class="ruby-value">0</span>
                        <span class="ruby-ivar">@paid</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">paid</span><span class="ruby-operator">|</span>
                           
                           
                           
                            <span class="ruby-ivar">@ticket</span> = <span class="ruby-constant">Ticket</span>.<span class="ruby-identifier">new</span>
                            <span class="ruby-ivar">@ticket</span>[<span class="ruby-value">:event_id</span>] = <span class="ruby-identifier">event_id</span>
                            <span class="ruby-ivar">@ticket</span>[<span class="ruby-value">:paid</span>] = <span class="ruby-value">1</span>
                            <span class="ruby-ivar">@ticket</span>[<span class="ruby-value">:paid_ticket_name</span>] = <span class="ruby-identifier">params</span>[<span class="ruby-value">:ticket</span>][<span class="ruby-value">:paid_ticket_name</span>][<span class="ruby-identifier">k</span>]
                            <span class="ruby-ivar">@ticket</span>[<span class="ruby-value">:paid_qty</span>] = <span class="ruby-identifier">params</span>[<span class="ruby-value">:ticket</span>][<span class="ruby-value">:paid_qty</span>][<span class="ruby-identifier">k</span>]
                            <span class="ruby-ivar">@ticket</span>[<span class="ruby-value">:paid_price</span>] = <span class="ruby-identifier">params</span>[<span class="ruby-value">:ticket</span>][<span class="ruby-value">:paid_price</span>][<span class="ruby-identifier">k</span>]
                            
                            <span class="ruby-ivar">@ticket</span>[<span class="ruby-value">:paid_service_fee</span>] = <span class="ruby-identifier">params</span>[<span class="ruby-value">:ticket</span>][<span class="ruby-value">:paid_service_fee</span>][<span class="ruby-identifier">k</span>]
                            <span class="ruby-ivar">@ticket</span>[<span class="ruby-value">:paid_buyer_total</span>] = <span class="ruby-identifier">params</span>[<span class="ruby-value">:ticket</span>][<span class="ruby-value">:paid_buyer_total</span>][<span class="ruby-identifier">k</span>]
                            <span class="ruby-ivar">@ticket</span>[<span class="ruby-value">:paid_fee</span>] = <span class="ruby-identifier">params</span>[<span class="ruby-value">:ticket</span>][<span class="ruby-value">:paid_fee</span>][<span class="ruby-identifier">k</span>]
                            
                            <span class="ruby-ivar">@ticket</span>[<span class="ruby-value">:paid_description</span>] = <span class="ruby-identifier">params</span>[<span class="ruby-value">:ticket</span>][<span class="ruby-value">:paid_description</span>][<span class="ruby-identifier">k</span>]
                            <span class="ruby-ivar">@ticket</span>[<span class="ruby-value">:paid_min_purchase</span>] = <span class="ruby-identifier">params</span>[<span class="ruby-value">:ticket</span>][<span class="ruby-value">:paid_min_purchase</span>][<span class="ruby-identifier">k</span>]
                            <span class="ruby-ivar">@ticket</span>[<span class="ruby-value">:paid_max_purchase</span>] = <span class="ruby-identifier">params</span>[<span class="ruby-value">:ticket</span>][<span class="ruby-value">:paid_max_purchase</span>][<span class="ruby-identifier">k</span>]
                            <span class="ruby-ivar">@ticket</span>[<span class="ruby-value">:paid_start_sale</span>] = <span class="ruby-identifier">params</span>[<span class="ruby-value">:ticket</span>][<span class="ruby-value">:paid_start_sale</span>][<span class="ruby-identifier">k</span>]
                            <span class="ruby-ivar">@ticket</span>[<span class="ruby-value">:paid_end_sale</span>] = <span class="ruby-identifier">params</span>[<span class="ruby-value">:ticket</span>][<span class="ruby-value">:paid_end_sale</span>][<span class="ruby-identifier">k</span>]
                            <span class="ruby-ivar">@ticket</span>[<span class="ruby-value">:paid_hide_description</span>] = <span class="ruby-identifier">params</span>[<span class="ruby-value">:ticket</span>][<span class="ruby-value">:paid_hide_description</span>][<span class="ruby-identifier">k</span>]  
                            <span class="ruby-ivar">@ticket</span>[<span class="ruby-value">:paid_ticket_status</span>] = <span class="ruby-identifier">params</span>[<span class="ruby-value">:ticket</span>][<span class="ruby-value">:paid_ticket_status</span>][<span class="ruby-identifier">k</span>] 
                            
                            <span class="ruby-ivar">@ticket</span>[<span class="ruby-value">:free</span>] = <span class="ruby-value">0</span>
                            <span class="ruby-ivar">@ticket</span>[<span class="ruby-value">:donation</span>] = <span class="ruby-value">0</span>
                        
                             <span class="ruby-keyword">if</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:ticket</span>][<span class="ruby-value">:paid_ticket_id</span>][<span class="ruby-identifier">k</span>]<span class="ruby-operator">==</span><span class="ruby-value">0</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:ticket</span>][<span class="ruby-value">:paid_ticket_id</span>][<span class="ruby-identifier">k</span>]<span class="ruby-operator">==</span><span class="ruby-string">'0'</span> 
                                  <span class="ruby-ivar">@ticket</span>.<span class="ruby-identifier">save</span>
                            <span class="ruby-keyword">else</span>  
                                  <span class="ruby-ivar">@tic</span> = <span class="ruby-constant">Ticket</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-value">:ticket</span>][<span class="ruby-value">:paid_ticket_id</span>][<span class="ruby-identifier">k</span>])
                                  <span class="ruby-constant">Ticket</span>.<span class="ruby-identifier">update</span>(<span class="ruby-identifier">params</span>[<span class="ruby-value">:ticket</span>][<span class="ruby-value">:paid_ticket_id</span>][<span class="ruby-identifier">k</span>], 
                                      <span class="ruby-value">:paid_ticket_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:ticket</span>][<span class="ruby-value">:paid_ticket_name</span>][<span class="ruby-identifier">k</span>],
                                      <span class="ruby-value">:paid_qty</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:ticket</span>][<span class="ruby-value">:paid_qty</span>][<span class="ruby-identifier">k</span>], 
                                      <span class="ruby-value">:paid_price</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:ticket</span>][<span class="ruby-value">:paid_price</span>][<span class="ruby-identifier">k</span>], 
                                      <span class="ruby-value">:paid_service_fee</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:ticket</span>][<span class="ruby-value">:paid_service_fee</span>][<span class="ruby-identifier">k</span>], 
                                      <span class="ruby-value">:paid_buyer_total</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:ticket</span>][<span class="ruby-value">:paid_buyer_total</span>][<span class="ruby-identifier">k</span>], 
                                      <span class="ruby-value">:paid_min_purchase</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:ticket</span>][<span class="ruby-value">:paid_min_purchase</span>][<span class="ruby-identifier">k</span>], 
                                      <span class="ruby-value">:paid_max_purchase</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:ticket</span>][<span class="ruby-value">:paid_max_purchase</span>][<span class="ruby-identifier">k</span>],
                                      <span class="ruby-value">:paid_start_sale</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:ticket</span>][<span class="ruby-value">:paid_start_sale</span>][<span class="ruby-identifier">k</span>], 
                                      <span class="ruby-value">:paid_end_sale</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:ticket</span>][<span class="ruby-value">:paid_end_sale</span>][<span class="ruby-identifier">k</span>], 
                                      <span class="ruby-value">:paid_hide_description</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:ticket</span>][<span class="ruby-value">:paid_hide_description</span>][<span class="ruby-identifier">k</span>], 
                                      <span class="ruby-value">:paid_ticket_status</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:ticket</span>][<span class="ruby-value">:paid_ticket_status</span>][<span class="ruby-identifier">k</span>])
                            <span class="ruby-keyword">end</span>
                            
                            <span class="ruby-identifier">k</span><span class="ruby-operator">+=</span><span class="ruby-value">1</span>
                        <span class="ruby-keyword">end</span>
                      <span class="ruby-keyword">end</span> 
                    <span class="ruby-keyword">end</span>    
                   <span class="ruby-comment">#### donation tickets save</span>
                    
                      <span class="ruby-ivar">@donation</span> = <span class="ruby-identifier">params</span>[<span class="ruby-value">:ticket</span>][<span class="ruby-value">:donation_ticket_name</span>]
                    
                    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@donation</span>
                      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@donation</span>.<span class="ruby-identifier">count</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
                        <span class="ruby-identifier">k</span>=<span class="ruby-value">0</span>
                        <span class="ruby-ivar">@donation</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">donation</span><span class="ruby-operator">|</span>
                           
                            <span class="ruby-ivar">@ticket</span> = <span class="ruby-constant">Ticket</span>.<span class="ruby-identifier">new</span>
                            <span class="ruby-ivar">@ticket</span>[<span class="ruby-value">:event_id</span>] = <span class="ruby-identifier">event_id</span>
                            <span class="ruby-ivar">@ticket</span>[<span class="ruby-value">:donation</span>] = <span class="ruby-value">1</span>
                            <span class="ruby-ivar">@ticket</span>[<span class="ruby-value">:donation_ticket_name</span>] = <span class="ruby-identifier">params</span>[<span class="ruby-value">:ticket</span>][<span class="ruby-value">:donation_ticket_name</span>][<span class="ruby-identifier">k</span>]
                            <span class="ruby-ivar">@ticket</span>[<span class="ruby-value">:donation_qty</span>] = <span class="ruby-identifier">params</span>[<span class="ruby-value">:ticket</span>][<span class="ruby-value">:donation_qty</span>][<span class="ruby-identifier">k</span>]
                            <span class="ruby-ivar">@ticket</span>[<span class="ruby-value">:donation_description</span>] = <span class="ruby-identifier">params</span>[<span class="ruby-value">:ticket</span>][<span class="ruby-value">:donation_description</span>][<span class="ruby-identifier">k</span>]
                            <span class="ruby-comment">#@ticket[:donation_min_purchase] = params[:ticket][:donation_min_purchase][k]</span>
                            <span class="ruby-comment">#@ticket[:donation_max_purchase] = params[:ticket][:donation_max_purchase][k]</span>
                            <span class="ruby-ivar">@ticket</span>[<span class="ruby-value">:donation_service_fee</span>] = <span class="ruby-identifier">params</span>[<span class="ruby-value">:ticket</span>][<span class="ruby-value">:donation_service_fee</span>][<span class="ruby-identifier">k</span>]
                           
                            <span class="ruby-ivar">@ticket</span>[<span class="ruby-value">:donation_start_sale</span>] = <span class="ruby-identifier">params</span>[<span class="ruby-value">:ticket</span>][<span class="ruby-value">:donation_start_sale</span>][<span class="ruby-identifier">k</span>]
                            <span class="ruby-ivar">@ticket</span>[<span class="ruby-value">:donation_end_sale</span>] = <span class="ruby-identifier">params</span>[<span class="ruby-value">:ticket</span>][<span class="ruby-value">:donation_end_sale</span>][<span class="ruby-identifier">k</span>]
                            
                            <span class="ruby-ivar">@ticket</span>[<span class="ruby-value">:donation_hide_description</span>] = <span class="ruby-identifier">params</span>[<span class="ruby-value">:ticket</span>][<span class="ruby-value">:donation_hide_description</span>][<span class="ruby-identifier">k</span>]  
                            <span class="ruby-ivar">@ticket</span>[<span class="ruby-value">:donation_ticket_status</span>] = <span class="ruby-identifier">params</span>[<span class="ruby-value">:ticket</span>][<span class="ruby-value">:donation_ticket_status</span>][<span class="ruby-identifier">k</span>] 
                            
                            <span class="ruby-ivar">@ticket</span>[<span class="ruby-value">:paid</span>] = <span class="ruby-value">0</span>
                            <span class="ruby-ivar">@ticket</span>[<span class="ruby-value">:free</span>] = <span class="ruby-value">0</span>
                        
                            <span class="ruby-keyword">if</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:ticket</span>][<span class="ruby-value">:donation_ticket_id</span>][<span class="ruby-identifier">k</span>]<span class="ruby-operator">==</span><span class="ruby-value">0</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:ticket</span>][<span class="ruby-value">:donation_ticket_id</span>][<span class="ruby-identifier">k</span>]<span class="ruby-operator">==</span><span class="ruby-string">'0'</span>
                                  <span class="ruby-ivar">@ticket</span>.<span class="ruby-identifier">save</span>
                            <span class="ruby-keyword">else</span>  
                                  <span class="ruby-ivar">@tic</span> = <span class="ruby-constant">Ticket</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-value">:ticket</span>][<span class="ruby-value">:donation_ticket_id</span>][<span class="ruby-identifier">k</span>])
                                  <span class="ruby-constant">Ticket</span>.<span class="ruby-identifier">update</span>(<span class="ruby-identifier">params</span>[<span class="ruby-value">:ticket</span>][<span class="ruby-value">:donation_ticket_id</span>][<span class="ruby-identifier">k</span>], 
                                      <span class="ruby-value">:donation_ticket_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:ticket</span>][<span class="ruby-value">:donation_ticket_name</span>][<span class="ruby-identifier">k</span>],
                                      <span class="ruby-value">:donation_qty</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:ticket</span>][<span class="ruby-value">:donation_qty</span>][<span class="ruby-identifier">k</span>], 
                                      <span class="ruby-value">:donation_description</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:ticket</span>][<span class="ruby-value">:donation_description</span>][<span class="ruby-identifier">k</span>], 
                                      <span class="ruby-value">:donation_service_fee</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:ticket</span>][<span class="ruby-value">:donation_service_fee</span>][<span class="ruby-identifier">k</span>],
                                      
                                     <span class="ruby-comment"># :donation_min_purchase =&gt; params[:ticket][:donation_min_purchase][k], </span>
                                      <span class="ruby-comment">#:donation_max_purchase =&gt; params[:ticket][:donation_max_purchase][k], </span>
                                      <span class="ruby-value">:donation_start_sale</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:ticket</span>][<span class="ruby-value">:donation_start_sale</span>][<span class="ruby-identifier">k</span>], 
                                      <span class="ruby-value">:donation_end_sale</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:ticket</span>][<span class="ruby-value">:donation_end_sale</span>][<span class="ruby-identifier">k</span>],
                                      
                                      <span class="ruby-value">:donation_hide_description</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:ticket</span>][<span class="ruby-value">:donation_hide_description</span>][<span class="ruby-identifier">k</span>], 
                                      <span class="ruby-value">:donation_ticket_status</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:ticket</span>][<span class="ruby-value">:donation_ticket_status</span>][<span class="ruby-identifier">k</span>])
                            <span class="ruby-keyword">end</span>
                            
                            <span class="ruby-identifier">k</span><span class="ruby-operator">+=</span><span class="ruby-value">1</span>
                        <span class="ruby-keyword">end</span> 
                      <span class="ruby-keyword">end</span>
                    <span class="ruby-keyword">end</span>    
                 
                 <span class="ruby-keyword">end</span>      <span class="ruby-comment">########### tickets section end  ###############   </span>
                    
                 
                  <span class="ruby-identifier">flash</span>[<span class="ruby-value">:notice1</span>] = <span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span> <span class="ruby-string">'event_controller.event_details_save_successfully'</span>              
                 
                     <span class="ruby-keyword">if</span>(<span class="ruby-identifier">params</span>[<span class="ruby-value">:submit_type</span>]<span class="ruby-operator">==</span><span class="ruby-string">'save'</span>)
                        
                        <span class="ruby-identifier">format</span>.<span class="ruby-identifier">html</span> { <span class="ruby-identifier">redirect_to</span>(<span class="ruby-value">:action=</span><span class="ruby-operator">&gt;</span><span class="ruby-string">'index'</span> ) }
                        
                     <span class="ruby-keyword">elsif</span>(<span class="ruby-identifier">params</span>[<span class="ruby-value">:submit_type</span>]<span class="ruby-operator">==</span><span class="ruby-string">'view'</span>)
                        
                        <span class="ruby-keyword">if</span> <span class="ruby-ivar">@event</span>[<span class="ruby-value">:active</span>]<span class="ruby-operator">==</span><span class="ruby-value">0</span>
                            <span class="ruby-identifier">format</span>.<span class="ruby-identifier">html</span> { <span class="ruby-identifier">redirect_to</span>(<span class="ruby-value">:action=</span><span class="ruby-operator">&gt;</span><span class="ruby-string">'theme/'</span><span class="ruby-operator">+</span><span class="ruby-ivar">@event</span>[<span class="ruby-value">:id</span>].<span class="ruby-identifier">to_s</span> ) }
                        <span class="ruby-keyword">else</span>
                            <span class="ruby-identifier">format</span>.<span class="ruby-identifier">html</span> { <span class="ruby-identifier">redirect_to</span>(<span class="ruby-value">:action=</span><span class="ruby-operator">&gt;</span><span class="ruby-string">'view/'</span><span class="ruby-operator">+</span><span class="ruby-ivar">@event</span>[<span class="ruby-value">:id</span>].<span class="ruby-identifier">to_s</span> ) }
                        <span class="ruby-keyword">end</span> 
                    <span class="ruby-keyword">else</span>
                         <span class="ruby-ivar">@event</span>[<span class="ruby-value">:active</span>] = <span class="ruby-value">0</span>
                         <span class="ruby-identifier">flash</span>[<span class="ruby-value">:notice1</span>] = <span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span> <span class="ruby-string">'event_controller.event_saved_successfully_submitted'</span> 
                         <span class="ruby-ivar">@event</span>.<span class="ruby-identifier">save</span>
                        
                        <span class="ruby-constant">UserMailer</span>.<span class="ruby-identifier">make_event_live_request</span>(<span class="ruby-ivar">@event</span>).<span class="ruby-identifier">deliver</span>
                         <span class="ruby-identifier">format</span>.<span class="ruby-identifier">html</span> { <span class="ruby-identifier">redirect_to</span>(<span class="ruby-value">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'manage_event'</span>, <span class="ruby-value">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'index/'</span><span class="ruby-operator">+</span><span class="ruby-ivar">@event</span>[<span class="ruby-value">:id</span>].<span class="ruby-identifier">to_s</span>) }
                     <span class="ruby-keyword">end</span> 
                        
                 
                 <span class="ruby-identifier">format</span>.<span class="ruby-identifier">xml</span>  { <span class="ruby-identifier">render</span> <span class="ruby-value">:xml</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@event</span>, <span class="ruby-value">:status</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">:created</span>, <span class="ruby-value">:location</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@event</span> }
                
                <span class="ruby-keyword">else</span>
                   <span class="ruby-identifier">flash</span>.<span class="ruby-identifier">now</span>[<span class="ruby-value">:notice</span>] = <span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span> <span class="ruby-string">'event_controller.error_creating_try_again'</span>
                   <span class="ruby-identifier">format</span>.<span class="ruby-identifier">html</span> { <span class="ruby-identifier">render</span> <span class="ruby-value">:template</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'events/create_event'</span> }
                <span class="ruby-keyword">end</span>
                
            <span class="ruby-keyword">end</span>        
      
        <span class="ruby-keyword">else</span>    <span class="ruby-comment">########### after post else starts #####</span>
           <span class="ruby-ivar">@event</span> = <span class="ruby-constant">Event</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">params</span>[<span class="ruby-value">:event</span>])
        <span class="ruby-keyword">end</span>   <span class="ruby-comment">########### after post ends #####</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- create_event-source -->
          
        </div>

        

        
      </div><!-- create_event-method -->

    
      <div id="method-i-custom_url" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">custom_url</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="custom_url-source">
            <pre><span class="ruby-comment"># File app/controllers/events_controller.rb, line 518</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">custom_url</span>
  
   <span class="ruby-ivar">@site</span> = <span class="ruby-constant">SiteSetting</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">:first</span>)
   
   <span class="ruby-keyword">if</span>(<span class="ruby-identifier">params</span>[<span class="ruby-value">:id</span>])
      <span class="ruby-ivar">@event</span> = <span class="ruby-constant">Event</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">:first</span>, <span class="ruby-value">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-string">'event_url_link=?'</span>,<span class="ruby-identifier">params</span>[<span class="ruby-value">:id</span>]])
   <span class="ruby-keyword">else</span>
      <span class="ruby-ivar">@event</span> = <span class="ruby-constant">Event</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">session</span>[<span class="ruby-value">:event_id</span>])
   <span class="ruby-keyword">end</span>  
   
   <span class="ruby-identifier">lang</span> = <span class="ruby-constant">Language</span>.<span class="ruby-identifier">find_name</span>(<span class="ruby-ivar">@event</span>[<span class="ruby-value">:language_id</span>])
   <span class="ruby-identifier">set_locale</span>(<span class="ruby-identifier">lang</span>)
   <span class="ruby-ivar">@meta_title</span> = <span class="ruby-ivar">@event</span>[<span class="ruby-value">:event_title</span>]<span class="ruby-comment">#I18n.t 'meta_title.event_view'</span>
   <span class="ruby-ivar">@meta_keyword</span> = <span class="ruby-ivar">@event</span>[<span class="ruby-value">:event_title</span>].<span class="ruby-identifier">gsub</span>(<span class="ruby-string">&quot; &quot;</span>, <span class="ruby-string">&quot;,&quot;</span>)
   <span class="ruby-ivar">@meta_desc</span> = <span class="ruby-ivar">@event</span>[<span class="ruby-value">:event_title</span>]<span class="ruby-operator">+</span> <span class="ruby-string">' -- '</span><span class="ruby-operator">+</span><span class="ruby-ivar">@event</span>[<span class="ruby-value">:event_start_date_time</span>].<span class="ruby-identifier">strftime</span>(<span class="ruby-string">'%A, %B %d, %Y'</span>).<span class="ruby-identifier">to_s</span><span class="ruby-operator">+</span><span class="ruby-string">' -- '</span><span class="ruby-operator">+</span><span class="ruby-ivar">@event</span>[<span class="ruby-value">:organizer_host</span>]
   
   <span class="ruby-ivar">@promo</span> = <span class="ruby-string">''</span>
   <span class="ruby-ivar">@code_type</span> = <span class="ruby-value">0</span>
   <span class="ruby-ivar">@promo_code_id</span> = <span class="ruby-value">0</span>
   
   <span class="ruby-keyword">if</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:promo</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:promo</span>]<span class="ruby-operator">!=</span><span class="ruby-string">''</span>
       <span class="ruby-ivar">@promo_code</span> = <span class="ruby-constant">PromotionalCode</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">:first</span>, <span class="ruby-value">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-string">'code=?'</span>, <span class="ruby-identifier">params</span>[<span class="ruby-value">:promo</span>]])
       <span class="ruby-keyword">if</span> <span class="ruby-ivar">@promo_code</span>
          <span class="ruby-ivar">@code_type</span> = <span class="ruby-value">1</span>
       <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">flash</span>[<span class="ruby-value">:notice</span>] = <span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span> <span class="ruby-string">'validation.event_view.not_promo'</span>  
       <span class="ruby-keyword">end</span>  
   <span class="ruby-keyword">end</span>
   
   <span class="ruby-ivar">@org_id</span> = <span class="ruby-ivar">@event</span>[<span class="ruby-value">:organizer_id</span>]
   
   <span class="ruby-keyword">if</span> <span class="ruby-identifier">session</span>[<span class="ruby-value">:user_id</span>]<span class="ruby-operator">==</span><span class="ruby-keyword">nil</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">session</span>[<span class="ruby-value">:user_id</span>]<span class="ruby-operator">==</span><span class="ruby-string">''</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">session</span>[<span class="ruby-value">:user_id</span>]<span class="ruby-operator">==</span><span class="ruby-ivar">@event</span>[<span class="ruby-value">:user_id</span>]
      <span class="ruby-constant">Event</span>.<span class="ruby-identifier">update_all</span>([<span class="ruby-string">'page_visits=?'</span>, <span class="ruby-ivar">@event</span>[<span class="ruby-value">:page_visits</span>]<span class="ruby-operator">+</span><span class="ruby-value">1</span>],[<span class="ruby-string">'id=?'</span>,<span class="ruby-ivar">@event</span>[<span class="ruby-value">:id</span>]])
   <span class="ruby-keyword">end</span>
    
   <span class="ruby-ivar">@event_theme</span> = <span class="ruby-constant">EventTheme</span>.<span class="ruby-identifier">one_theme</span>(<span class="ruby-ivar">@event</span>[<span class="ruby-value">:id</span>])
   <span class="ruby-keyword">if</span> <span class="ruby-ivar">@event_theme</span>
   <span class="ruby-keyword">else</span> <span class="ruby-ivar">@event_theme</span> = <span class="ruby-constant">Theme</span>.<span class="ruby-identifier">find_first_theme</span>
   <span class="ruby-keyword">end</span>
   
   <span class="ruby-ivar">@updates</span> = <span class="ruby-constant">EventUpdate</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">:all</span>, <span class="ruby-value">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-string">'event_id=?'</span>, <span class="ruby-ivar">@event</span>[<span class="ruby-value">:id</span>]])
   <span class="ruby-ivar">@one_theme</span> = <span class="ruby-ivar">@event_theme</span>
   <span class="ruby-identifier">render</span> <span class="ruby-value">:layout</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'application_login'</span>, <span class="ruby-value">:template</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'events/view'</span>
   
<span class="ruby-keyword">end</span></pre>
          </div><!-- custom_url-source -->
          
        </div>

        

        
      </div><!-- custom_url-method -->

    
      <div id="method-i-download_excel" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">download_excel</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="download_excel-source">
            <pre><span class="ruby-comment"># File app/controllers/events_controller.rb, line 24</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">download_excel</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:org_id</span>]<span class="ruby-operator">!=</span><span class="ruby-string">''</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:org_id</span>]<span class="ruby-operator">!=</span><span class="ruby-keyword">nil</span>
         <span class="ruby-ivar">@events</span> = <span class="ruby-constant">Event</span>.<span class="ruby-identifier">find_live_org_session_events</span>(<span class="ruby-identifier">session</span>[<span class="ruby-value">:user_id</span>], <span class="ruby-identifier">params</span>[<span class="ruby-value">:org_id</span>])
  <span class="ruby-keyword">else</span>
         <span class="ruby-ivar">@events</span> = <span class="ruby-constant">Event</span>.<span class="ruby-identifier">find_live_events</span>(<span class="ruby-identifier">session</span>[<span class="ruby-value">:user_id</span>])
  <span class="ruby-keyword">end</span>
   <span class="ruby-identifier">respond_to</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">format</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">format</span>.<span class="ruby-identifier">xls</span> <span class="ruby-comment"># { send_data @products.to_csv(col_sep: &quot;\t&quot;) }</span>
   <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- download_excel-source -->
          
        </div>

        

        
      </div><!-- download_excel-method -->

    
      <div id="method-i-edit" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">edit</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>edit_event starts #####</p>
          

          
          <div class="method-source-code" id="edit-source">
            <pre><span class="ruby-comment"># File app/controllers/events_controller.rb, line 448</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">edit</span>
  <span class="ruby-ivar">@meta_title</span> = <span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span> <span class="ruby-string">'meta_title.set_event_title'</span>
   <span class="ruby-ivar">@event</span> = <span class="ruby-constant">Event</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-value">:id</span>])
  
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@event</span>[<span class="ruby-value">:user_id</span>] <span class="ruby-operator">==</span> <span class="ruby-identifier">session</span>[<span class="ruby-value">:user_id</span>]
     <span class="ruby-identifier">session</span>[<span class="ruby-value">:event_id</span>] = <span class="ruby-ivar">@event</span>[<span class="ruby-value">:id</span>]
     
     <span class="ruby-identifier">respond_to</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">format</span><span class="ruby-operator">|</span>
          <span class="ruby-identifier">format</span>.<span class="ruby-identifier">html</span>  { <span class="ruby-identifier">render</span> <span class="ruby-value">:template</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'events/create_event'</span> }
     <span class="ruby-keyword">end</span> 
  <span class="ruby-keyword">else</span>
       <span class="ruby-identifier">flash</span>[<span class="ruby-value">:notice</span>] = <span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span> <span class="ruby-string">'event_controller.not_access_page'</span>        
       <span class="ruby-identifier">redirect_to</span>(<span class="ruby-value">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'home'</span>, <span class="ruby-value">:action=</span><span class="ruby-operator">&gt;</span><span class="ruby-string">'index'</span> )
  <span class="ruby-keyword">end</span>
  
<span class="ruby-keyword">end</span></pre>
          </div><!-- edit-source -->
          
        </div>

        

        
      </div><!-- edit-method -->

    
      <div id="method-i-event_display_attendee" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">event_display_attendee</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>view event details end ##################</p>
          

          
          <div class="method-source-code" id="event_display_attendee-source">
            <pre><span class="ruby-comment"># File app/controllers/events_controller.rb, line 568</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">event_display_attendee</span>
 <span class="ruby-ivar">@event</span> = <span class="ruby-constant">Event</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-value">:id</span>])
 <span class="ruby-ivar">@event_attendee</span> = <span class="ruby-constant">Attendee</span>.<span class="ruby-identifier">one_attendee</span>(<span class="ruby-ivar">@event</span>[<span class="ruby-value">:id</span>])
 <span class="ruby-keyword">if</span> <span class="ruby-ivar">@event_attendee</span>   
 <span class="ruby-keyword">else</span>
    <span class="ruby-ivar">@event_attendee</span> = <span class="ruby-constant">Attendee</span>.<span class="ruby-identifier">new</span>
 <span class="ruby-keyword">end</span>        
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">request</span>.<span class="ruby-identifier">post?</span>   <span class="ruby-comment">########### after post starts #####</span>
         
           <span class="ruby-identifier">respond_to</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">format</span><span class="ruby-operator">|</span>
               <span class="ruby-ivar">@event_attendee</span> = <span class="ruby-constant">Attendee</span>.<span class="ruby-identifier">one_attendee</span>(<span class="ruby-ivar">@event</span>[<span class="ruby-value">:id</span>])
            
               <span class="ruby-keyword">if</span> <span class="ruby-ivar">@event_attendee</span>
                  <span class="ruby-ivar">@event_attendee</span> = <span class="ruby-ivar">@event_attendee</span>.<span class="ruby-identifier">update_attributes</span>(<span class="ruby-identifier">params</span>[<span class="ruby-value">:event_attendee</span>])
               <span class="ruby-keyword">else</span>
                  <span class="ruby-ivar">@event_attendee</span> = <span class="ruby-constant">Attendee</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">params</span>[<span class="ruby-value">:event_attendee</span>])
                  <span class="ruby-ivar">@event_attendee</span>[<span class="ruby-value">:event_id</span>] = <span class="ruby-ivar">@event</span>[<span class="ruby-value">:id</span>]
                  <span class="ruby-ivar">@event_attendee</span>.<span class="ruby-identifier">save</span>
               <span class="ruby-keyword">end</span>
              
           <span class="ruby-keyword">end</span> 
          
      <span class="ruby-keyword">end</span> <span class="ruby-comment">########## after post ends #####</span>
       <span class="ruby-identifier">render</span> <span class="ruby-value">:layout</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">false</span>      
<span class="ruby-keyword">end</span></pre>
          </div><!-- event_display_attendee-source -->
          
        </div>

        

        
      </div><!-- event_display_attendee-method -->

    
      <div id="method-i-event_theme_page" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">event_theme_page</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="event_theme_page-source">
            <pre><span class="ruby-comment"># File app/controllers/events_controller.rb, line 614</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">event_theme_page</span>
   <span class="ruby-ivar">@event</span> = <span class="ruby-constant">Event</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-value">:event_id</span>])
   <span class="ruby-identifier">lang</span> = <span class="ruby-constant">Language</span>.<span class="ruby-identifier">find_name</span>(<span class="ruby-ivar">@event</span>[<span class="ruby-value">:language_id</span>])
   <span class="ruby-identifier">set_locale</span>(<span class="ruby-identifier">lang</span>)
   <span class="ruby-comment">#@meta_title = I18n.t 'meta_title.event_view'</span>
   
   <span class="ruby-ivar">@one_theme</span> = <span class="ruby-constant">Theme</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-value">:theme_id</span>])
   <span class="ruby-identifier">respond_to</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">format</span><span class="ruby-operator">|</span>
       <span class="ruby-identifier">format</span>.<span class="ruby-identifier">html</span>  { <span class="ruby-identifier">render</span> <span class="ruby-value">:template</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'events/_event_theme_page'</span>, <span class="ruby-value">:layout</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">false</span> }
   <span class="ruby-keyword">end</span> 
   
<span class="ruby-keyword">end</span></pre>
          </div><!-- event_theme_page-source -->
          
        </div>

        

        
      </div><!-- event_theme_page-method -->

    
      <div id="method-i-event_url_link" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">event_url_link</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="event_url_link-source">
            <pre><span class="ruby-comment"># File app/controllers/events_controller.rb, line 633</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">event_url_link</span>
  <span class="ruby-ivar">@event</span> = <span class="ruby-constant">Event</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">:first</span>, <span class="ruby-value">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-string">'event_url_link=?'</span>,<span class="ruby-identifier">params</span>[<span class="ruby-value">:val</span>]])
 
   <span class="ruby-keyword">if</span> <span class="ruby-ivar">@event</span>
       <span class="ruby-identifier">render</span> <span class="ruby-value">:json</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-value">:success</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span>, <span class="ruby-value">:msg</span> =<span class="ruby-operator">&gt;</span> (<span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span> <span class="ruby-string">'event_controller.url_already_taken'</span>)}
   <span class="ruby-keyword">else</span>
     <span class="ruby-identifier">render</span> <span class="ruby-value">:json</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-value">:success</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span>, <span class="ruby-value">:msg</span> =<span class="ruby-operator">&gt;</span> (<span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span> <span class="ruby-string">'contact_controller.success'</span>)  }
     
   <span class="ruby-keyword">end</span>  
     
<span class="ruby-keyword">end</span></pre>
          </div><!-- event_url_link-source -->
          
        </div>

        

        
      </div><!-- event_url_link-method -->

    
      <div id="method-i-index" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">index</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>event list #########</p>
          

          
          <div class="method-source-code" id="index-source">
            <pre><span class="ruby-comment"># File app/controllers/events_controller.rb, line 6</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">index</span>
   <span class="ruby-ivar">@meta_title</span> = <span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span> <span class="ruby-string">'meta_title.my_event'</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:org_id</span>]<span class="ruby-operator">!=</span><span class="ruby-string">''</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:org_id</span>]<span class="ruby-operator">!=</span><span class="ruby-keyword">nil</span>
         <span class="ruby-ivar">@live_events</span> = <span class="ruby-constant">Event</span>.<span class="ruby-identifier">find_live_org_session_events</span>(<span class="ruby-identifier">session</span>[<span class="ruby-value">:user_id</span>], <span class="ruby-identifier">params</span>[<span class="ruby-value">:org_id</span>])
         <span class="ruby-ivar">@draft_events</span> = <span class="ruby-constant">Event</span>.<span class="ruby-identifier">find_draft_org_session_events</span>(<span class="ruby-identifier">session</span>[<span class="ruby-value">:user_id</span>], <span class="ruby-identifier">params</span>[<span class="ruby-value">:org_id</span>])
         <span class="ruby-ivar">@pass_events</span> = <span class="ruby-constant">Event</span>.<span class="ruby-identifier">find_pass_org_session_events</span>(<span class="ruby-identifier">session</span>[<span class="ruby-value">:user_id</span>], <span class="ruby-identifier">params</span>[<span class="ruby-value">:org_id</span>])
         <span class="ruby-ivar">@cancel_events</span> = <span class="ruby-constant">Event</span>.<span class="ruby-identifier">find_cancel_org_session_events</span>(<span class="ruby-identifier">session</span>[<span class="ruby-value">:user_id</span>], <span class="ruby-identifier">params</span>[<span class="ruby-value">:org_id</span>])
    <span class="ruby-keyword">else</span>
         <span class="ruby-ivar">@live_events</span> = <span class="ruby-constant">Event</span>.<span class="ruby-identifier">find_live_events</span>(<span class="ruby-identifier">session</span>[<span class="ruby-value">:user_id</span>])
         <span class="ruby-ivar">@draft_events</span> = <span class="ruby-constant">Event</span>.<span class="ruby-identifier">find_draft_events</span>(<span class="ruby-identifier">session</span>[<span class="ruby-value">:user_id</span>])
         <span class="ruby-ivar">@pass_events</span> = <span class="ruby-constant">Event</span>.<span class="ruby-identifier">find_pass_events</span>(<span class="ruby-identifier">session</span>[<span class="ruby-value">:user_id</span>])
         <span class="ruby-ivar">@cancel_events</span> = <span class="ruby-constant">Event</span>.<span class="ruby-identifier">find_cancel_events</span>(<span class="ruby-identifier">session</span>[<span class="ruby-value">:user_id</span>])
    <span class="ruby-keyword">end</span>
   
   <span class="ruby-ivar">@site</span> = <span class="ruby-constant">SiteSetting</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">:first</span>)
   
<span class="ruby-keyword">end</span></pre>
          </div><!-- index-source -->
          
        </div>

        

        
      </div><!-- index-method -->

    
      <div id="method-i-save_event" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">save_event</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="save_event-source">
            <pre><span class="ruby-comment"># File app/controllers/events_controller.rb, line 647</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">save_event</span>
  <span class="ruby-ivar">@event</span> = <span class="ruby-constant">Event</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-value">:id</span>])
   <span class="ruby-identifier">lang</span> = <span class="ruby-constant">Language</span>.<span class="ruby-identifier">find_name</span>(<span class="ruby-ivar">@event</span>[<span class="ruby-value">:language_id</span>])
   <span class="ruby-identifier">set_locale</span>(<span class="ruby-identifier">lang</span>)
   
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@event</span>
        <span class="ruby-keyword">if</span> <span class="ruby-ivar">@event</span>[<span class="ruby-value">:user_id</span>]<span class="ruby-operator">==</span><span class="ruby-identifier">session</span>[<span class="ruby-value">:user_id</span>]
            <span class="ruby-identifier">msg</span> = (<span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span> <span class="ruby-string">'validation.event_view.can_not_save_own_event'</span>)      
        <span class="ruby-keyword">else</span>
            <span class="ruby-ivar">@cnt</span> = <span class="ruby-constant">SaveEvent</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">:all</span>, <span class="ruby-value">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-string">'user_id=? AND event_id=?'</span>, <span class="ruby-identifier">session</span>[<span class="ruby-value">:user_id</span>], <span class="ruby-ivar">@event</span>[<span class="ruby-value">:id</span>]]).<span class="ruby-identifier">count</span>
            
            <span class="ruby-keyword">if</span> <span class="ruby-ivar">@cnt</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span> 
                <span class="ruby-identifier">msg</span> = (<span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span> <span class="ruby-string">'validation.event_view.already_saved'</span>)       
            <span class="ruby-keyword">else</span>  
                <span class="ruby-ivar">@evesave</span> = <span class="ruby-constant">SaveEvent</span>.<span class="ruby-identifier">new</span>
                <span class="ruby-ivar">@evesave</span>[<span class="ruby-value">:user_id</span>] = <span class="ruby-identifier">session</span>[<span class="ruby-value">:user_id</span>]
                <span class="ruby-ivar">@evesave</span>[<span class="ruby-value">:event_id</span>] = <span class="ruby-ivar">@event</span>[<span class="ruby-value">:id</span>]
                
                 <span class="ruby-keyword">if</span> <span class="ruby-ivar">@evesave</span>.<span class="ruby-identifier">save</span>
                      <span class="ruby-identifier">msg</span> = (<span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span> <span class="ruby-string">'contact_controller.success'</span>)
                  <span class="ruby-keyword">else</span>
                      <span class="ruby-identifier">msg</span> = <span class="ruby-ivar">@evesave</span>.<span class="ruby-identifier">errors</span>.<span class="ruby-identifier">full_messages</span>[<span class="ruby-value">0</span>]  
                  <span class="ruby-keyword">end</span> 
                
                
            <span class="ruby-keyword">end</span>  
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">else</span>
       <span class="ruby-identifier">msg</span> = (<span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span> <span class="ruby-string">'validation.event_view.event_not_exists'</span>)           
       
  <span class="ruby-keyword">end</span>
 
  <span class="ruby-identifier">render</span> <span class="ruby-value">:json</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-value">:success</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span>, <span class="ruby-value">:msg</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">msg</span>}
  
<span class="ruby-keyword">end</span></pre>
          </div><!-- save_event-source -->
          
        </div>

        

        
      </div><!-- save_event-method -->

    
      <div id="method-i-subcategory_selection" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">subcategory_selection</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="subcategory_selection-source">
            <pre><span class="ruby-comment"># File app/controllers/events_controller.rb, line 596</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">subcategory_selection</span>
     <span class="ruby-ivar">@subcategory</span> = <span class="ruby-constant">Category</span>.<span class="ruby-identifier">sub_category_by_parent</span>(<span class="ruby-identifier">params</span>[<span class="ruby-value">:category</span>])
     <span class="ruby-identifier">respond_to</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">format</span><span class="ruby-operator">|</span>
       <span class="ruby-identifier">format</span>.<span class="ruby-identifier">html</span>  { <span class="ruby-identifier">render</span> <span class="ruby-value">:layout</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">false</span> }
     <span class="ruby-keyword">end</span> 
<span class="ruby-keyword">end</span></pre>
          </div><!-- subcategory_selection-source -->
          
        </div>

        

        
      </div><!-- subcategory_selection-method -->

    
      <div id="method-i-theme" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">theme</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p><a href="EventsController.html#method-i-create_event">#create_event</a>
theme starts #####</p>
          

          
          <div class="method-source-code" id="theme-source">
            <pre><span class="ruby-comment"># File app/controllers/events_controller.rb, line 385</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">theme</span>
  <span class="ruby-ivar">@meta_title</span> = <span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span> <span class="ruby-string">'meta_title.event_theme'</span>
  <span class="ruby-ivar">@event</span> = <span class="ruby-constant">Event</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-value">:id</span>])
   
    
   <span class="ruby-keyword">if</span> <span class="ruby-ivar">@event</span>[<span class="ruby-value">:user_id</span>] <span class="ruby-operator">==</span> <span class="ruby-identifier">session</span>[<span class="ruby-value">:user_id</span>]
      <span class="ruby-identifier">session</span>[<span class="ruby-value">:event_id</span>] = <span class="ruby-ivar">@event</span>[<span class="ruby-value">:id</span>]
      
      <span class="ruby-identifier">lang</span> = <span class="ruby-constant">Language</span>.<span class="ruby-identifier">find_name</span>(<span class="ruby-ivar">@event</span>[<span class="ruby-value">:language_id</span>])
      <span class="ruby-identifier">set_locale</span>(<span class="ruby-identifier">lang</span>)
   
       <span class="ruby-keyword">if</span> <span class="ruby-identifier">request</span>.<span class="ruby-identifier">post?</span>   <span class="ruby-comment">########### after post starts #####</span>
             <span class="ruby-ivar">@event_theme</span> = <span class="ruby-constant">EventTheme</span>.<span class="ruby-identifier">one_theme</span>(<span class="ruby-ivar">@event</span>[<span class="ruby-value">:id</span>])
             
           
            <span class="ruby-identifier">respond_to</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">format</span><span class="ruby-operator">|</span>
               
                <span class="ruby-keyword">if</span> <span class="ruby-ivar">@event_theme</span>
                   <span class="ruby-ivar">@event_theme</span> = <span class="ruby-ivar">@event_theme</span>.<span class="ruby-identifier">update_attributes</span>(<span class="ruby-identifier">params</span>[<span class="ruby-value">:event_theme</span>])
                <span class="ruby-keyword">else</span>
                   <span class="ruby-ivar">@event_theme</span> = <span class="ruby-constant">EventTheme</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">params</span>[<span class="ruby-value">:event_theme</span>])
                   <span class="ruby-ivar">@event_theme</span>[<span class="ruby-value">:event_id</span>] = <span class="ruby-ivar">@event</span>[<span class="ruby-value">:id</span>]
                   <span class="ruby-ivar">@event_theme</span>.<span class="ruby-identifier">save</span>
                <span class="ruby-keyword">end</span>
                
                 <span class="ruby-ivar">@event</span>.<span class="ruby-identifier">update_attributes</span>(<span class="ruby-identifier">params</span>[<span class="ruby-value">:event</span>])
                
             <span class="ruby-comment">#  format.html  { render :template =&gt; 'events/create_event_theme' }</span>
                <span class="ruby-keyword">if</span>(<span class="ruby-identifier">params</span>[<span class="ruby-value">:submit_type</span>]<span class="ruby-operator">==</span><span class="ruby-string">'save'</span>)
                     <span class="ruby-identifier">flash</span>[<span class="ruby-value">:notice1</span>] = <span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span> <span class="ruby-string">'event_controller.event_design_save_successfully'</span>   
                     <span class="ruby-identifier">format</span>.<span class="ruby-identifier">html</span> { <span class="ruby-identifier">redirect_to</span>(<span class="ruby-value">:action=</span><span class="ruby-operator">&gt;</span><span class="ruby-string">'index'</span> ) }
                     
                  <span class="ruby-keyword">elsif</span>(<span class="ruby-identifier">params</span>[<span class="ruby-value">:submit_type</span>]<span class="ruby-operator">==</span><span class="ruby-string">'view'</span>)
                     <span class="ruby-keyword">if</span> <span class="ruby-ivar">@event</span>[<span class="ruby-value">:active</span>]<span class="ruby-operator">==</span><span class="ruby-value">0</span>
                         <span class="ruby-identifier">format</span>.<span class="ruby-identifier">html</span> { <span class="ruby-identifier">redirect_to</span>(<span class="ruby-value">:action=</span><span class="ruby-operator">&gt;</span><span class="ruby-string">'theme/'</span><span class="ruby-operator">+</span><span class="ruby-ivar">@event</span>[<span class="ruby-value">:id</span>].<span class="ruby-identifier">to_s</span> ) }
                     <span class="ruby-keyword">else</span>
                         <span class="ruby-identifier">format</span>.<span class="ruby-identifier">html</span> { <span class="ruby-identifier">redirect_to</span>(<span class="ruby-value">:action=</span><span class="ruby-operator">&gt;</span><span class="ruby-string">'view/'</span><span class="ruby-operator">+</span><span class="ruby-ivar">@event</span>[<span class="ruby-value">:id</span>].<span class="ruby-identifier">to_s</span> ) }
                     <span class="ruby-keyword">end</span>      
                  <span class="ruby-keyword">else</span>
                      <span class="ruby-ivar">@event</span>[<span class="ruby-value">:active</span>] = <span class="ruby-value">0</span>
                      <span class="ruby-identifier">flash</span>[<span class="ruby-value">:notice1</span>] = <span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span> <span class="ruby-string">'event_controller.event_saved_successfully_submitted'</span>
                      <span class="ruby-ivar">@event</span>.<span class="ruby-identifier">save</span>
                      <span class="ruby-constant">UserMailer</span>.<span class="ruby-identifier">make_event_live_request</span>(<span class="ruby-ivar">@event</span>).<span class="ruby-identifier">deliver</span>
                      <span class="ruby-identifier">format</span>.<span class="ruby-identifier">html</span> { <span class="ruby-identifier">redirect_to</span>(<span class="ruby-value">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'manage_event'</span>, <span class="ruby-value">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'index/'</span><span class="ruby-operator">+</span><span class="ruby-ivar">@event</span>[<span class="ruby-value">:id</span>].<span class="ruby-identifier">to_s</span>) }
                  <span class="ruby-keyword">end</span> 
                         
               
            <span class="ruby-keyword">end</span> 
           
       <span class="ruby-keyword">end</span> <span class="ruby-comment">########## after post ends #####</span>
      
   <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">flash</span>[<span class="ruby-value">:notice</span>] = <span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span> <span class="ruby-string">'event_controller.not_allowed_edit_event_theme'</span>              
        <span class="ruby-identifier">redirect_to</span>(<span class="ruby-value">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'home'</span>, <span class="ruby-value">:action=</span><span class="ruby-operator">&gt;</span><span class="ruby-string">'index'</span> )
   <span class="ruby-keyword">end</span>
   
<span class="ruby-keyword">end</span></pre>
          </div><!-- theme-source -->
          
        </div>

        

        
      </div><!-- theme-method -->

    
      <div id="method-i-uploading" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">uploading</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="uploading-source">
            <pre><span class="ruby-comment"># File app/controllers/events_controller.rb, line 627</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">uploading</span>
 <span class="ruby-identifier">post</span> = <span class="ruby-constant">Event</span>.<span class="ruby-identifier">saveimage</span>(<span class="ruby-identifier">params</span>[<span class="ruby-value">:upload</span>])
 <span class="ruby-identifier">render</span> <span class="ruby-value">:json</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-value">:success</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span>, <span class="ruby-value">:msg</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-value">:image</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">post</span>.<span class="ruby-identifier">as_json</span>(), <span class="ruby-value">:error</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">''</span>, <span class="ruby-value">:success</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">''</span>}  } 
<span class="ruby-keyword">end</span></pre>
          </div><!-- uploading-source -->
          
        </div>

        

        
      </div><!-- uploading-method -->

    
      <div id="method-i-view" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">view</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>view event details start ##################</p>
          

          
          <div class="method-source-code" id="view-source">
            <pre><span class="ruby-comment"># File app/controllers/events_controller.rb, line 470</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">view</span>
   
   <span class="ruby-ivar">@site</span> = <span class="ruby-constant">SiteSetting</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">:first</span>)
   
   <span class="ruby-keyword">if</span>(<span class="ruby-identifier">params</span>[<span class="ruby-value">:id</span>])
      <span class="ruby-ivar">@event</span> = <span class="ruby-constant">Event</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-value">:id</span>])
   <span class="ruby-keyword">else</span>
      <span class="ruby-ivar">@event</span> = <span class="ruby-constant">Event</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">session</span>[<span class="ruby-value">:event_id</span>])
   <span class="ruby-keyword">end</span>  
   
   <span class="ruby-identifier">lang</span> = <span class="ruby-constant">Language</span>.<span class="ruby-identifier">find_name</span>(<span class="ruby-ivar">@event</span>[<span class="ruby-value">:language_id</span>])
   <span class="ruby-identifier">set_locale</span>(<span class="ruby-identifier">lang</span>)
   <span class="ruby-ivar">@meta_title</span> = <span class="ruby-ivar">@event</span>[<span class="ruby-value">:event_title</span>]<span class="ruby-comment">#I18n.t 'meta_title.event_view'</span>
   <span class="ruby-ivar">@meta_keyword</span> = <span class="ruby-ivar">@event</span>[<span class="ruby-value">:event_title</span>].<span class="ruby-identifier">gsub</span>(<span class="ruby-string">&quot; &quot;</span>, <span class="ruby-string">&quot;,&quot;</span>)
   <span class="ruby-ivar">@meta_desc</span> = <span class="ruby-ivar">@event</span>[<span class="ruby-value">:event_title</span>]<span class="ruby-operator">+</span> <span class="ruby-string">' -- '</span><span class="ruby-operator">+</span><span class="ruby-ivar">@event</span>[<span class="ruby-value">:event_start_date_time</span>].<span class="ruby-identifier">strftime</span>(<span class="ruby-string">'%A, %B %d, %Y'</span>).<span class="ruby-identifier">to_s</span><span class="ruby-operator">+</span><span class="ruby-string">' -- '</span><span class="ruby-operator">+</span><span class="ruby-ivar">@event</span>[<span class="ruby-value">:organizer_host</span>]
   
   <span class="ruby-ivar">@promo</span> = <span class="ruby-string">''</span>
   <span class="ruby-ivar">@code_type</span> = <span class="ruby-value">0</span>
   <span class="ruby-ivar">@promo_code_id</span> = <span class="ruby-value">0</span>
   
   <span class="ruby-keyword">if</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:promo</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:promo</span>]<span class="ruby-operator">!=</span><span class="ruby-string">''</span>
       <span class="ruby-ivar">@promo_code</span> = <span class="ruby-constant">PromotionalCode</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">:first</span>, <span class="ruby-value">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-string">'code=?'</span>, <span class="ruby-identifier">params</span>[<span class="ruby-value">:promo</span>]])
       <span class="ruby-keyword">if</span> <span class="ruby-ivar">@promo_code</span>
          <span class="ruby-ivar">@code_type</span> = <span class="ruby-value">1</span>
       <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">flash</span>[<span class="ruby-value">:notice</span>] = <span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span> <span class="ruby-string">'validation.event_view.not_promo'</span>  
       <span class="ruby-keyword">end</span>  
   <span class="ruby-keyword">end</span>
   <span class="ruby-ivar">@org_id</span> = <span class="ruby-ivar">@event</span>[<span class="ruby-value">:organizer_id</span>]
   
   <span class="ruby-keyword">if</span> <span class="ruby-identifier">session</span>[<span class="ruby-value">:user_id</span>]<span class="ruby-operator">==</span><span class="ruby-keyword">nil</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">session</span>[<span class="ruby-value">:user_id</span>]<span class="ruby-operator">==</span><span class="ruby-string">''</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">session</span>[<span class="ruby-value">:user_id</span>]<span class="ruby-operator">!=</span><span class="ruby-ivar">@event</span>[<span class="ruby-value">:user_id</span>]
      <span class="ruby-constant">Event</span>.<span class="ruby-identifier">update_all</span>([<span class="ruby-string">'page_visits=?'</span>, <span class="ruby-ivar">@event</span>[<span class="ruby-value">:page_visits</span>]<span class="ruby-operator">+</span><span class="ruby-value">1</span>],[<span class="ruby-string">'id=?'</span>,<span class="ruby-ivar">@event</span>[<span class="ruby-value">:id</span>]])
   <span class="ruby-keyword">end</span>
    
   <span class="ruby-ivar">@event_theme</span> = <span class="ruby-constant">EventTheme</span>.<span class="ruby-identifier">one_theme</span>(<span class="ruby-ivar">@event</span>[<span class="ruby-value">:id</span>])
   <span class="ruby-keyword">if</span> <span class="ruby-ivar">@event_theme</span>
   <span class="ruby-keyword">else</span> <span class="ruby-ivar">@event_theme</span> = <span class="ruby-constant">Theme</span>.<span class="ruby-identifier">find_first_theme</span>
   <span class="ruby-keyword">end</span>
   
   
   <span class="ruby-ivar">@updates</span> = <span class="ruby-constant">EventUpdate</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">:all</span>, <span class="ruby-value">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-string">'event_id=?'</span>, <span class="ruby-ivar">@event</span>[<span class="ruby-value">:id</span>]])
   <span class="ruby-ivar">@one_theme</span> = <span class="ruby-ivar">@event_theme</span>
   <span class="ruby-identifier">render</span> <span class="ruby-value">:layout</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'application_login'</span>
   
   
<span class="ruby-keyword">end</span></pre>
          </div><!-- view-source -->
          
        </div>

        

        
      </div><!-- view-method -->

    
    </section><!-- public-instance-method-details -->
  
  </section><!-- 5Buntitled-5D -->

</div><!-- documentation -->


<footer id="validator-badges">
  <p><a href="http://validator.w3.org/check/referer">[Validate]</a>
  <p>Generated by <a href="https://github.com/rdoc/rdoc">RDoc</a> 3.12.2.
  <p>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish Rdoc Generator</a> 3.
</footer>

